//ç¬¬ä¸€æ¬¡å®‰è£…llvmï¼Œä¸‹é¢æ˜¯éƒ¨åˆ†logã€‚
âœ  ~ brew install llvm   
==> Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/bottles/llvm-13.0.1_1.arm64_monterey.bottle.tar.gz
#######################################################################   99.9%curl: (56) LibreSSL SSL_read: Connection reset by peer, errno 54

Warning: Bottle missing, falling back to the default domain...
==> Downloading https://ghcr.io/v2/homebrew/core/llvm/manifests/13.0.1_1
######################################################################## 100.0%
==> Downloading https://ghcr.io/v2/homebrew/core/llvm/blobs/sha256:8242e90a3ee6b20d7fd782e7da2bda892ee8b877a6a0e9cf7d4ca62c693cc9cb
==> Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sha256:8242e90a3ee6b20d7fd782e7da2bda892ee8b877a6a0e9cf7d4ca62c693cc9cb?se=2022-
######################################################################## 100.0%
==> Pouring llvm--13.0.1_1.arm64_monterey.bottle.tar.gz
==> Caveats
To use the bundled libc++ please add the following LDFLAGS:
  LDFLAGS="-L/opt/homebrew/opt/llvm/lib -Wl,-rpath,/opt/homebrew/opt/llvm/lib"

llvm is keg-only, which means it was not symlinked into /opt/homebrew,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

If you need to have llvm first in your PATH, run:
  echo 'export PATH="/opt/homebrew/opt/llvm/bin:$PATH"' >> ~/.zshrc

For compilers to find llvm you may need to set:
  export LDFLAGS="-L/opt/homebrew/opt/llvm/lib"
  export CPPFLAGS="-I/opt/homebrew/opt/llvm/include"

==> Summary
ğŸº  /opt/homebrew/Cellar/llvm/13.0.1_1: 5,449 files, 909.2MB
==> Running `brew cleanup llvm`...
Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.
Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).
âœ  ~ 
âœ  ~ 
âœ  ~ echo 'export PATH="/opt/homebrew/opt/llvm/bin:$PATH"' >> ~/.zshrc 
âœ  ~ vi ~/.zshrc 
âœ  ~ llvm
zsh: command not found: llvm
âœ  ~ df -lh
Filesystem       Size   Used  Avail Capacity iused      ifree %iused  Mounted on
/dev/disk3s1s1  228Gi   23Gi  179Gi    12%  577694 1872049720    0%   /
/dev/disk3s6    228Gi   20Ki  179Gi     1%       0 1872049720    0%   /System/Volumes/VM
/dev/disk3s2    228Gi  422Mi  179Gi     1%     307 1872049720    0%   /System/Volumes/Preboot
/dev/disk3s4    228Gi  602Mi  179Gi     1%     196 1872049720    0%   /System/Volumes/Update
/dev/disk1s2    500Mi  6.0Mi  482Mi     2%       1    4930880    0%   /System/Volumes/xarts
/dev/disk1s1    500Mi  7.3Mi  482Mi     2%      21    4930880    0%   /System/Volumes/iSCPreboot
/dev/disk1s3    500Mi  456Ki  482Mi     1%      48    4930880    0%   /System/Volumes/Hardware
/dev/disk3s5    228Gi   24Gi  179Gi    12%  479633 1872049720    0%   /System/Volumes/Data
/dev/disk3s1    228Gi   23Gi  179Gi    12%  500639 1872049720    0%   /System/Volumes/Update/mnt1
/dev/disk5s1     39Mi   26Mi   12Mi    68%     120     126720    0%   /Volumes/LANDrop

//llvm/clang çš„ç®€å•ä½¿ç”¨
ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼š
clang test.c -o test

è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼š
test

ç”Ÿæˆllvmå­—èŠ‚ç æ–‡ä»¶ï¼š
clang -O1 -emit-llvm test.c -c -o test.bc

ç”ŸæˆLLVM çš„æ±‡ç¼–ä»£ç  .ll æ–‡ä»¶(å¯è§†åŒ–å­—èŠ‚ç æ–‡ä»¶)
clang -O1 -emit-llvm test.c -S -o test.ll

è¿è¡Œå­—èŠ‚ç æ–‡ä»¶ï¼š
lli test.bc
ç»“æœ: "hello world"
.llæ–‡ä»¶ä¹Ÿå¯ä»¥ç”¨lliæ¥æ‰§è¡Œ

å°† .bc æ–‡ä»¶è½¬åŒ–ä¸º .ll æ–‡ä»¶:
llvm-dis test.bc

å°† .ll æ–‡ä»¶è½¬åŒ–ä¸º .bc æ–‡ä»¶:
llvm-as test.ll

ç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶ä¸ºæ±‡ç¼–æ–‡ä»¶ï¼š
llc test.bc -o test.s

å°† .bc æˆ– .ll æ–‡ä»¶è½¬åŒ–ä¸ºæœ¬æœºå¹³å°çš„æ±‡ç¼–ä»£ç ï¼š
llc test.bc
llc test.ll
